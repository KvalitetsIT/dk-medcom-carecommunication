### Scope and usage 
This profile is used as the Communication resource for the MedCom CareCommunication message. MedComCareCommunication contains the main content of a message, as it always shall include a textual part, called message text (Danish: Meddelelsestekst), and it may include zero or more attachments, why this profile is central in a MedCom CareCommunication message. A more detailed description of the content of the MedComCareCommunication profile can be seen below. 

The figure below shows the possible references from MedComCareCommunication profile, and thereby which resources that may be included in a CareCommunication message. A subject, in terms of a [MedComCorePatient](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-patient.html), shall always be included since a CareCommunication message always concerns a patient's matter. A [MedComCorePractitionerRole](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-practitionerrole.html) and [MedComCorePractitioner](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-practitioner.html) shall be included since these reference includes information about the author of the message text or attachment. A [MedComCoreEncounter](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-encounter.html) may be referenced if an episodeOfCare-identifier (Danish: forløbs-id) is relevant to include. Further, the [Danish Core Organization Profile])(https://hl7.dk/fhir/core/StructureDefinition-dk-core-organization.html), [MedComCoreOrganization](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-organization.html),[MedComCorePractitionerRole](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-practitionerrole.html) or [MedComCorePractitioner](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-practitioner.html) may be included if a recipient or sender is added. 

<img alt="MedComCareCommunication references a MedComCorePatient, MedComCoreEncounter, Danish Core Organization Profile, MedComCoreOrganization, MedComCorePractitioner, or MedComCorePractitionerRole. A subject, in terms of a MedComCorePatient, shall always be included since a CareCommunication message alway shall concern a patient matter, a MedComCorePractitioner shall be included since the reference describes information about the author of the message text or attachment, and a MedComCoreEncounter may be referenced if an episodeOfCare-identifier (Danish: forløbs-id) is relevant to include. Further, the Danish Core Organization Profile, MedComCoreOrganization, MedComCorePractitioner, or MedComCorePractitionerRole may be included if a recipient or sender is added. " src="./carecommunication/CareCommunicationCommunication.svg" style="float:none; display:block; margin-left:auto; margin-right:auto;" />

Please refer to the tab "Snapshot Table(Must support)" below for the definition of the required content of a MedComCareCommunication.

#### Categories and Topic

All MedCom CareCommunication messages shall have a category (Danish: Kategori), in the element Communication.category, describing the overall content of the correspondence. The [ValueSet containing these category codes can be found here](https://medcomfhir.dk/ig/terminology/ValueSet-medcom-careCommunication-categories.html). In time new category codes may be relevant to include or existing codes may be irrelevant, why it should be expected that the ValueSet will changed. Changes will be made in agreement with the business and will be warned. 

In addition to the category, it is allowed to add a topic (Danish: Emne) in the element Communication.topic, to support and elaborate the category. This can either be inserted as free text or as regionally agreed codes, which is describes further in the [clinical guidelines for application](https://medcomdk.github.io/dk-medcom-carecommunication/#11-clinical-guidelines-for-application). When answering and forwarding a CareCommunication message, the same category and topic from the previous message should be inserted automatically. The user then has the option to change it to a different category and a different topic if desired.

When sending a CareCommunication message with the category *other*, a topic shall be included. To ensure this, the invariant medcom-careCommunication-6 is created. The invariant can be found the on [MedComCareCommunicationMessage](https://medcomfhir.dk/ig/carecommunication/StructureDefinition-medcom-careCommunication-message.html). 

#### Priority

Priority, found in the element Communication.priority, may be used to support the referral flow. It is only allowed to add a priority of a CareCommunication message when the category of the message is *regarding referral*. In this case priority can either be *routine* or *asap*. To insure this, the invariant medcom-careCommunication-5 is created, which states that in no other case than when the category is *regarding referral*, may a priority be added. As describes on [clinical guidelines for application](https://medcomdk.github.io/dk-medcom-carecommunication/#11-clinical-guidelines-for-application), the use of priority must follow the development in collective agreements and on basis of national requirements. 

#### Encounter 

In the element Communication.encounter it is possible to reference a [MedComCoreEncounter](https://medcomfhir.dk/ig/core/StructureDefinition-medcom-core-encounter.html) profile. An encounter describes the meeting between a patient and one or more healthcare providers or actors involved in the patient care. An example where this is relevant could be when the communication concerns a hospitalisation of a patient, where an episodeOfCare-identifier is used to connect the communication and hospitalisation. In this case, should a reference to the MedComCoreEncounter and episodeOfCare-identifier be included.  

#### Recipient and sender

In the [MedComCareCommunicationMessageHeader](https://medcomfhir.dk/ig/carecommunication/StructureDefinition-medcom-careCommunication-messageHeader.html) profile it is required to include information about a sender and receiver in terms of a reference to a [MedComMessagingOrganization](https://medcomfhir.dk/ig/messaging/StructureDefinition-medcom-messaging-organization.html). This information are primarily used for transportation matters and will always include an EAN-number and SOR-identifier for each organisation. 

When sending a CareCommunication message it is possible to add a more specific receiver of the message, called a recipient, and a more specific sender, which can be found in the elements Communication.recipient and Communication.sender, respectively. From the two elements a more specific organisation or person related to the care and wellbeing of the patient or citizen can be referenced. An example could be to address a specific general practitioner by name, a specific hospital department or eventually a specific social unit within the social care sector in a municipality. 

For both the recipient and sender it is possible to reference a MedComCorePractitioner, MedComCorePractitionerRole, MedComCoreOrganization, and DkCoreOrganization. The DKCoreOrganization is included to allowed the sender or recipient which does not have an without a SOR-code, e.g. a subdepartment within the social care sector with a Kombit organisation code. 

#### Payloads

As mentioned in the [clinical guidelines for application](https://medcomdk.github.io/dk-medcom-carecommunication/#11-clinical-guidelines-for-application) both message text and attachments shall include: <br> 
* An author (Danish: forfatter) and role (Danish: stillingsbetegnelse)
* A relevant telephone
* A timestamp
* An identifier (only relevant for attachments (Danish: Bilag)) <br>
These informations are described below for each of the payload types. 

The message text and attachments of a CareCommunication message will both be included in the element Communication.payload, however they shall be included in different slices. At least one payload which includes the message text shall be included when sending a CareCommunication message, but zero or more attachments may be included. 

##### Message text
In a message text, which is included in the element Communication.payload:string, an author, author role, timestamp, and the written content of the message shall be included. The written content of the message is of the datatype [string defined by FHIR](http://hl7.org/fhir/R4/datatypes.html#string), and it shall obey the rules for [xhtml](http://hl7.org/fhir/R4/xml.html). <br> 
**Author:** The person responsible for writing the message text. The author shall be described using a specialisation of the Practitioner resource, more precisely a MedComCorePractitioner. <br> 
**Author role:** The role person responsible for writing the message text. The author role shall be described using the PractitionerRole resource, more precisely a MedComCorePractitionerRole. <br> 
**Timestamp:** The date and time for when the message text was last saved. <br> 
**Relevant telephonenumber:** A relevant telephone number e.g. to the department from which the CareCommunication is sent. The telephonenumber should be applied automatically without user interference and it is recommended to use the same telephonenumber as in the SOR-register for the sender organisation. In case it is not possible to apply the telephone number automatically, it shall be applied be the author.

##### Attachments 
An attachment shall be of the type pdf, jpeg, png, tiff or gif. 
For an attachment, which is included in the element Communication.payload:attachment, an author, author role, relevant telephonenumber, timestamp, identifier and the actual attachment shall be included. <br> 
**Author:** The person responsible for writing or attaching the attachment. As mentioned in the [clinical guidelines for application](https://medcomdk.github.io/dk-medcom-carecommunication/#11-clinical-guidelines-for-application), is both the the author of an attachment and the person the attaches the attachment responsible for the content. It is recommended that the author of the attachment is used as the author, why information about this person shall be included when sending a CareCommunication message. Alternatively can the author of the message, hence the person attaching the attachment be used as the author. In both cases shall the author be described using a specialisation of the Practitioner resource, more precisely a MedComCorePractitioner. <br>  
**Author role:** The role person responsible for writing or attaching the attachment. Is shall reflect the person used as author. The author role shall be described using the PractitionerRole resource, more precisely a MedComCorePractitionerRole. <br> 
**Timestamp:** The date and time for when the attachment was completed or when the attachment was attached to the message. It is recommended that the date and time for when the attachment was completed is used. If this timestamp is not known, it is recommended that the date and time for attaching the attachment is used. <br>  
**Identifier:** An UUID with a reference to the sending organisation. The assigner is a reference to the organisation who assigned the UUID, which will be the same as the sender organisation, when the attachment was first included. If the attachment is modified and reattached, it shall be given a new UUID and the assigner shall be updated. <br> 
**Relevant telephone number:** A relevant telephone number e.g. to the department from which the CareCommunication is sent. The telephonenumber should be applied automaticly without user interference and it is recommended to use the same telephonenumber as in the SOR-register for the sender organisation. In case it is not possible to apply the telephone number automatically, it shall be applied be the author.
